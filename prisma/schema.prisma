generator client {
  provider = "prisma-client"
  output   = "../src/lib/generated/prisma"
}

datasource db {
  provider = "mysql"
}

model item_boxes {
  uid             Int @id @default(autoincrement())
  box_id          Int
  item_id         Int
  item_id2        Int
  min_count       Int
  max_count       Int
  rarity          Int @db.TinyInt
  smart_drop_rate Int
  group_drop_id   Int
}

model items {
  id                  Int    @id
  name                String @db.VarChar(100)
  tooltip_description String @db.Text
  guide_description   String @db.Text
  main_description    String @db.Text
  rarity              Int    @default(1) @db.UnsignedTinyInt
  is_outfit           Int    @db.TinyInt
  job_limit           Json
  job_recommend       Json
  level_min           Int    @default(0)
  level_max           Int    @default(0)
  gender              Int    @default(0) @db.UnsignedTinyInt
  icon_path           String @default("") @db.VarChar(100)
  visit_count         Int    @default(0)
  pet_id              Int    @default(0)
  is_ugc              Int    @default(0) @db.TinyInt
  transfer_type       Int    @default(0)
  sellable            Int    @default(0) @db.TinyInt
  breakable           Int    @default(0) @db.TinyInt
  fusionable          Int    @default(0) @db.TinyInt
  skill_id            Int    @default(0)
  skill_level         Int    @default(0)
  stack_limit         Int    @default(0)
  tradeable_count     Int    @default(0)
  repackage_count     Int    @default(0)
  sell_price          Json
  kfms                Json
  icon_code           Int    @db.TinyInt
  move_disable        Int    @db.TinyInt
  remake_disable      Int    @db.TinyInt
  gear_score          Int
  enchantable         Int    @db.TinyInt
  dyeable             Int    @db.TinyInt
  constants_stats     Json
  static_stats        Json
  random_stats        Json
  random_stat_count   Int    @db.TinyInt
  slot                Int    @db.UnsignedTinyInt
  set_info            Json
  set_name            String @default("") @db.VarChar(100)
  item_preset         String @default("") @db.VarChar(4)
  glamour_count       Int    @default(0)
  repackage_scrolls   String @db.Text
  repackage_limit     Int    @default(0)
  box_id              Int    @default(0)
  item_type           Int    @default(0)
  represent_option    Int    @default(0)
  additional_effects  String @db.Text
  story_book_id       Int    @default(0)
}

model npcs {
  id             Int    @id
  name           String @db.VarChar(100)
  kfm            String @db.Text
  is_boss        Int    @default(0) @db.TinyInt
  npc_type       Int    @default(0)
  gender         Int    @default(0) @db.TinyInt
  level          Int    @default(0)
  portrait       String @default("") @db.VarChar(200)
  stats          String @db.Text
  visit_count    Int    @default(0)
  animations     String @db.Text
  race           String @default("") @db.VarChar(100)
  class_name     String @default("") @db.VarChar(100)
  field_metadata String @db.Text
  title          String @default("") @db.VarChar(100)
  shop_id        Int    @default(0)
  skills         String @db.Text
}

model additional_effects {
  id          Int    @id
  icon_path   String @db.VarChar(100)
  name        String @db.VarChar(400)
  description String @db.Text
  levels      Json
}

model maps {
  id                    Int     @id
  name                  String  @db.VarChar(100)
  visit_count           Int     @default(0)
  minimap               String  @default("") @db.VarChar(200)
  icon                  String  @default("") @db.VarChar(200)
  bg                    String  @default("") @db.VarChar(200)
  description           String? @db.Text
  xblock_name           String? @db.VarChar(100)
  recommended_level     Int?    @default(0)
  drop_rank             Int?    @default(0)
  max_capacity          Int?    @default(0)
  death_penalty         Int?    @default(0) @db.TinyInt
  flight_enabled        Int?    @default(1) @db.TinyInt
  climb_enabled         Int?    @default(1) @db.TinyInt
  home_returnable       Int?    @default(1) @db.TinyInt
  is_tutorial_map       Int?    @default(0) @db.TinyInt
  revival_return_map_id Int?    @default(0)
  enter_return_map_id   Int?    @default(0)
  minimap_width         Int?    @default(0)
  minimap_height        Int?    @default(0)
  bounding_box_min_x    Int?    @default(0)
  bounding_box_min_y    Int?    @default(0)
  bounding_box_min_z    Int?    @default(0)
  bounding_box_max_x    Int?    @default(0)
  bounding_box_max_y    Int?    @default(0)
  bounding_box_max_z    Int?    @default(0)
  block_metadata        Json?
}

model achieves {
  id                   Int    @id
  name                 String @db.VarChar(100)
  visit_count          Int    @default(0)
  portrait             String @default("") @db.VarChar(200)
  description          String @db.Text
  complete_description String @db.Text
  icon                 String @db.VarChar(100)
  grades               String @db.Text
}

model quests {
  id                  Int    @id
  name                String @db.VarChar(255)
  description         String @db.Text
  manualDescription   String @db.Text
  completeDescription String @db.Text
  questType           Int
  questLevel          Int
  requiredLevel       Int
  requiredQuest       Json
  selectableQuest     Json
  startNpcId          Int
  completeNpcId       Int
  startRewards        Json
  completeRewards     Json
  visit_count         Int    @default(0)
}

model map_npcs {
  uid                      Int     @id @default(autoincrement())
  map_id                   Int
  npc_id                   Int
  coord_x                  Int
  coord_y                  Int
  coord_z                  Int
  rotation_x               Int
  rotation_y               Int
  rotation_z               Int
  model_name               String? @db.VarChar(200)
  instance_name            String? @db.VarChar(200)
  is_spawn_on_field_create Int?    @db.TinyInt
  is_day_die               Int?    @db.TinyInt
  is_night_die             Int?    @db.TinyInt
  patrol_data_uuid         String? @db.VarChar(100)

  @@index([map_id], map: "idx_map_npcs_map_id")
  @@index([npc_id], map: "idx_map_npcs_npc_id")
}

model map_portals {
  uid                Int     @id @default(autoincrement())
  map_id             Int
  portal_id          Int
  name               String? @db.VarChar(200)
  destination_map_id Int
  target_portal_id   Int
  coord_x            Int
  coord_y            Int
  coord_z            Int
  rotation_x         Int
  rotation_y         Int
  rotation_z         Int
  portal_type        Int
  is_enabled         Int?    @db.TinyInt
  is_visible         Int?    @db.TinyInt
  minimap_visible    Int?    @db.TinyInt
  trigger_id         Int?

  @@index([destination_map_id], map: "idx_map_portals_destination")
  @@index([map_id], map: "idx_map_portals_map_id")
}

model quest_maps {
  uid      Int @id @default(autoincrement())
  quest_id Int
  map_id   Int

  @@unique([quest_id, map_id], map: "idx_quest_map_unique")
  @@index([map_id], map: "idx_quest_maps_map_id")
  @@index([quest_id], map: "idx_quest_maps_quest_id")
}

model map_mobs {
  uid            Int  @id @default(autoincrement())
  map_id         Int
  spawn_point_id Int
  npc_id         Int
  coord_x        Int
  coord_y        Int
  coord_z        Int
  rotation_x     Int
  rotation_y     Int
  rotation_z     Int
  min_difficulty Int? @default(0)
  max_difficulty Int? @default(0)
  population     Int? @default(1)
  cooldown       Int? @default(0)
  pet_population Int? @default(0)
  pet_spawn_rate Int? @default(0)

  @@index([map_id], map: "idx_map_mobs_map_id")
  @@index([npc_id], map: "idx_map_mobs_npc_id")
  @@index([spawn_point_id], map: "idx_map_mobs_spawn_point")
}
